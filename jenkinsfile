pipeline {

  deleteDir()
  agent any

try {
    stage ('Clone') {

       }

    stage ('Build') {
            printStepName("BUILDING THE EDUCATION APP SERVER")
            dir('source-code') {
                withMaven(maven: 'maven' {
                sh 'mvn clean install'
                }
            }

    }

    stage ('Tests') {
        parallel 'static': {
         sh "echo 'shell scripts to run static tests...'"
         },
         'unit': {
         sh "echo 'shell scripts to run unit tests...'"
         },
         'integration': {
          sh "echo 'shell scripts to run integration tests...'"
          }
    }

    stage ('Deploy') {
        dir('source-code') {
                        withEnv(["JAVA_HOME=${JAVA_PATH}"]) {
                        sh 'java -Dfile.encoding=utf-8 -jar ..\EducationAppServer\target\server-0.0.1-SNAPSHOT.jar'
                        }
                    }
    }

} catch (err) {
    currentBuild.result = 'FAILED'
    throw err
}
}